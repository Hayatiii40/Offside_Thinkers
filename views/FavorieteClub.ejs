<!DOCTYPE html>
<html lang="nl">

<head>
  <meta charset="UTF-8" />
  <title>Favoriete Clubs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="/CSS/favc.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <a href="javascript:history.back()" class="back-button">
    <i class="fas fa-arrow-left"></i>
  </a>

  <header>
    <img id="teamlogo" src="/assets/Logo.png" alt="Offside Logo" />
    <img id="ealogo" src="/assets/eaLogo.png" alt="EA Logo" />
  </header>

  <main>
    <div id="container">
      <section class="zone1">
        <h1>FavorieteClub page</h1>
        <div class="search-wrapper">
          <input id="searchbar" type="text" placeholder="Zoek een club" />
          <p class="glass">
            <i class="fa-solid fa-magnifying-glass"></i>
          </p>
          <button id="searchbutton">Zoeken</button>
        </div>
      </section>

      <section class="zone2" id="favorites-list">
      </section>
    </div>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("favorites-list");
      const searchInput = document.getElementById("searchbar");
      let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

      function render(clubs) {
        container.innerHTML = "";
        if (clubs.length === 0) {
          container.innerHTML = "<p>Geen favoriete clubs gevonden.</p>";
          return;
        }
        clubs.forEach(club => {
          const div = document.createElement("div");
          div.className = "team";
          div.setAttribute("data-name", club.name.toLowerCase());
          div.innerHTML = `
            <img src="${club.crest}" alt="${club.name}" class="team-logo" />
            <span class="team-name">${club.name}</span>
            <button class="delete-btn" onclick="removeFavorite('${club.name.toLowerCase()}')">Verwijderen</button>
            <button class="info">Info</button>`
            ;
          container.appendChild(div);
        });
      }

      render(favorites);

      document.getElementById("searchbutton").addEventListener("click", () => {
        const query = searchInput.value.toLowerCase();
        const filtered = favorites.filter(c => c.name.toLowerCase().includes(query));
        render(filtered);
      });

      window.removeFavorite = function (name) {
        favorites = favorites.filter(c => c.name.toLowerCase() !== name);
        localStorage.setItem("favorites", JSON.stringify(favorites));
        render(favorites);
      };
    });
  </script>
</body>

</html>